name: Elite Proxy Factory

on:
Â  schedule:
Â  Â  - cron: '0 * * * *'Â  Â  # Ğ Ğ°Ğ· Ğ² Ñ‡Ğ°Ñ (Ğ¸Ğ½ĞºÑ€ĞµĞ¼ĞµĞ½Ñ‚Ğ°Ğ»ÑŒĞ½Ğ¾ - Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ½Ğ¾Ğ²Ñ‹Ğµ)
Â  Â  - cron: '0 */6 * * *'Â  # Ğ Ğ°Ğ· Ğ² 6 Ñ‡Ğ°ÑĞ¾Ğ² (Ğ¿Ğ¾Ğ»Ğ½Ğ°Ñ Ñ‡Ğ¸ÑÑ‚ĞºĞ° Ğ²ÑĞµĞ¹ Ğ±Ğ°Ğ·Ñ‹)
Â  workflow_dispatch:Â  Â  Â  Â  # Ğ ÑƒÑ‡Ğ½Ğ¾Ğ¹ Ğ·Ğ°Ğ¿ÑƒÑĞº ĞºĞ½Ğ¾Ğ¿ĞºĞ¾Ğ¹
Â  Â  inputs:
Â  Â  Â  full_audit:
Â  Â  Â  Â  description: 'Run Full Audit? (Check everything)'
Â  Â  Â  Â  required: false
Â  Â  Â  Â  default: 'false'
Â  Â  Â  Â  type: boolean

jobs:
Â  build:
Â  Â  runs-on: ubuntu-latest
Â  Â  # Ğ”Ğ°ĞµĞ¼ Ğ¿Ñ€Ğ°Ğ²Ğ° Ğ½Ğ° Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ±Ğ¾Ñ‚ Ğ¼Ğ¾Ğ³ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑÑ‚ÑŒ Ñ„Ğ°Ğ¹Ğ»Ñ‹ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞ¾Ğº
Â  Â  permissions:
Â  Â  Â  contents: write
Â  Â  Â Â 
Â  Â  steps:
Â  Â  Â  - name: Checkout Code
Â  Â  Â  Â  uses: actions/checkout@v4

Â  Â  Â  - name: Setup Python
Â  Â  Â  Â  uses: actions/setup-python@v4
Â  Â  Â  Â  with:
Â  Â  Â  Â  Â  python-version: '3.10'

Â  Â  Â  - name: Cache Xray Binary
Â  Â  Â  Â  id: cache-xray
Â  Â  Â  Â  uses: actions/cache@v3
Â  Â  Â  Â  with:
Â  Â  Â  Â  Â  path: ./xray
Â  Â  Â  Â  Â  key: ${{ runner.os }}-xray-v1.8.4

Â  Â  Â  - name: Download Xray if not cached
Â  Â  Â  Â  if: steps.cache-xray.outputs.cache-hit != 'true'
Â  Â  Â  Â  run: |
Â  Â  Â  Â  Â  wget https://github.com/XTLS/Xray-core/releases/download/v1.8.4/Xray-linux-64.zip
Â  Â  Â  Â  Â  unzip Xray-linux-64.zip xray
Â  Â  Â  Â  Â  chmod +x xray

Â  Â  Â  - name: Install Dependencies
Â  Â  Â  Â  run: pip install requests

Â  Â  Â  - name: Run Proxy Factory
Â  Â  Â  Â  run: |
Â  Â  Â  Â  Â  # Ğ•ÑĞ»Ğ¸ Ğ·Ğ°Ğ¿ÑƒÑĞº Ğ¿Ğ¾ Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ Ñ€Ğ°Ğ· Ğ² 6 Ñ‡Ğ°ÑĞ¾Ğ² Ğ¸Ğ»Ğ¸ Ğ½Ğ°Ğ¶Ğ°Ñ‚ Ñ„Ğ»Ğ°Ğ³ Full Audit
Â  Â  Â  Â  Â  if [[ "${{ github.event.schedule }}" == "0 */6 * * *" || "${{ github.event.inputs.full_audit }}" == "true" ]]; then
Â  Â  Â  Â  Â  Â  echo "Running FULL AUDIT..."
Â  Â  Â  Â  Â  Â  python main.py --full
Â  Â  Â  Â  Â  else
Â  Â  Â  Â  Â  Â  echo "Running INCREMENTAL update..."
Â  Â  Â  Â  Â  Â  python main.py
Â  Â  Â  Â  Â  fi

Â  Â  Â  - name: Commit and Push Results
Â  Â  Â  Â  run: |
Â  Â  Â  Â  Â  git config --local user.email "action@github.com"
Â  Â  Â  Â  Â  git config --local user.name "GitHub Action Bot"
Â  Â  Â  Â  Â  # Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ²ÑĞµ Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ²Ñ‹Ğµ Ñ„Ğ°Ğ¹Ğ»Ñ‹ Ğ¸ base64 Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸
Â  Â  Â  Â  Â  git add sub_*.txt base64_*.txt || true
Â  Â  Â  Â  Â  git commit -m "ğŸš€ Auto-update: Elite Subscriptions [skip ci]" || exit 0
Â  Â  Â  Â  Â  git push
